@model ManagerDesk.ViewModels.TableCardViewModel
@{
    string TimeFormat = "HH:mm";
}

<div class="col-md-6 col-lg-3">
    <div class="info-item js-table-card @Model.TableStyles" data-actionstarget="@Url.Action("TableActions","Manager")" data-itemid="@Model.Id" data-type="Table">
        <div class="table-wrap">

            @if (Model.TableActive)
            {
                <div class="toolbar-mini">
                    <div class="toolbar-mini__btn @Model.OrderProcessedStyle js-set-table-action" data-target="@Url.Action("TableSetProccesed","Manager")"><i class="fa fa-check" aria-hidden="true"></i></div>
                    <div class="toolbar-mini__btn @Model.CheckNeededStyle js-set-table-action" data-target="@Url.Action("TableSetCheck","Manager")"><i class="fa fa-file-text" aria-hidden="true"></i></div>
                    <div class="toolbar-mini__btn @Model.HelpNeededStyle js-set-table-action" data-target="@Url.Action("TableSetHelp","Manager")"><i class="fa fa-child" aria-hidden="true"></i></div>
                    <div class="toolbar-mini__btn toolbar-mini__btn_theme_danger js-toolbar-close-table" data-target="@Url.Action("CloseTable","Manager")"><i class="fa fa-lock" aria-hidden="true"></i></div>
                </div>

                <div class="table-labels">
                    @if (Model.CheckNeeded)
                    {
                        <span class="label label-danger">Счет</span>
                    }
                    @if (Model.HelpNeeded)
                    {
                        <span class="label label-warning">Нужна помощь</span>
                    }
                </div>
            }

            <div>
                @if (Model.TableNumber == 0)
                {
                    <h3 class="info-item-heading">Новый стол</h3>
                }
                else
                {
                    <h3 class="info-item-heading">Стол <span class="table-number">@Model.TableNumber </span></h3>
                    if (Model.OrderPlaced != DateTime.MinValue)
                    {
                        <h5 class="info-item-heading">
                            Последний заказ: @Model.OrderPlaced.ToString(TimeFormat)
                        </h5>
                    }
                }
            </div>

            @foreach (var dish in Model.Orders)
            {
                <div class="dish-item">
                    <div class="dish-name-item">
                        <span class="dish-name">@dish.DishFromMenu.Name</span><span class="dish-price">@dish.DishFromMenu.Price р.</span>
                    </div>
                    @if (!string.IsNullOrEmpty(dish.Remarks))
                    {
                    <span class="dish-item-remarks">@dish.Remarks</span>
                    }
                </div>
            }

        </div>
    </div>
</div>